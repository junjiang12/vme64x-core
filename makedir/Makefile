########################################
#  This file was generated by hdlmake  #
#  http://ohwr.org/projects/hdl-make/  #
########################################

## variables #############################
PWD := $(shell pwd)
WORK_NAME := work

MODELSIM_INI_PATH := /etc/modelsim/modeltech

VCOM_FLAGS := -nologo -quiet -93 -modelsimini ./modelsim.ini 
VSIM_FLAGS := 
VLOG_FLAGS := -nologo -quiet -sv -modelsimini $(PWD)/modelsim.ini 
VERILOG_SRC := ../HDL/verilog_tb/vme_master.sv \
../HDL/verilog_tb/main.sv \

VERILOG_OBJ := work/vme_master/.vme_master_sv \
work/main/.main_sv \

VHDL_SRC := 
VHDL_OBJ := 
LIBS := work
LIB_IND := work/.work
## rules #################################
sim: modelsim.ini $(LIB_IND) $(VERILOG_OBJ) $(VHDL_OBJ)
$(VERILOG_OBJ): $(VHDL_OBJ) 
$(VHDL_OBJ): $(LIB_IND) modelsim.ini

modelsim.ini: $(MODELSIM_INI_PATH)/modelsim.ini
		cp $< .
clean:
		rm -rf ./modelsim.ini $(LIBS) $(WORK_NAME)
.PHONY: clean

wave: sim
	do wave.do
work/.work:
	(vlib work && vmap -modelsimini modelsim.ini work && touch work/.work )|| rm -rf work 

work/vme_master/.vme_master_sv: ../HDL/verilog_tb/vme_master.sv 
		vlog -work work $(VLOG_FLAGS) +incdir+../HDL/verilog_tb  $< && mkdir -p work/vme_master && touch work/vme_master/.vme_master_sv

work/main/.main_sv: ../HDL/verilog_tb/main.sv ../HDL/verilog_tb/vme_master.sv
		vlog -work work $(VLOG_FLAGS) +incdir+../HDL/verilog_tb  $< && mkdir -p work/main && touch work/main/.main_sv


